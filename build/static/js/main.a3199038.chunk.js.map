{"version":3,"sources":["components/PersonForm.js","components/Filter.js","components/PersonRecord.js","components/NumbersList.js","services/PhoneBookService.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","newName","number","handleNameChange","handleNumberChange","handleAddClick","value","onChange","type","onClick","Filter","filter","handleFilterChange","PersonRecord","person","handlePersonDelete","name","NumbersList","personsToShow","persons","Boolean","map","p","key","id","baseUrl","axios","get","then","response","data","newObject","post","delete","put","Notification","message","isError","className","App","useState","setPersons","setNewName","setNumber","setFilter","notification","setNotification","setIsError","useEffect","console","log","PhoneBookService","createNotification","isSuccessful","setTimeout","clearInputForm","toLowerCase","includes","event","target","preventDefault","trim","existingPerson","find","window","confirm","catch","error","concat","errorMessage","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a3199038.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  newName,\r\n  number,\r\n  handleNameChange,\r\n  handleNumberChange,\r\n  handleAddClick,\r\n}) => {\r\n  return (\r\n    <div>\r\n      <h3>add new</h3>\r\n      <form>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={number} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\" onClick={handleAddClick}>\r\n            add\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with: <input value={filter} onChange={handleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonRecord = ({ person, handlePersonDelete }) => {\r\n  return (\r\n    <div>\r\n      {person.name} {person.number}\r\n      <button onClick={() => handlePersonDelete(person)}>delete</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonRecord;\r\n","import React from \"react\";\r\nimport PersonRecord from \"./PersonRecord\";\r\n\r\nconst NumbersList = ({ personsToShow, handlePersonDelete }) => {\r\n  const persons = personsToShow.filter(Boolean);\r\n  return (\r\n    <div>\r\n      <h3>Numbers</h3>\r\n      <div>\r\n        {persons.map((p) => (\r\n          <PersonRecord\r\n            key={p.id}\r\n            person={p}\r\n            handlePersonDelete={handlePersonDelete}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NumbersList;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, remove, update };\r\n","import React from \"react\";\r\nimport \"../index.css\";\r\n\r\nconst Notification = ({ message, isError }) => {\r\n  return (\r\n    message && (\r\n      <div className={`notification ${isError ? \"error\" : \"success\"}`}>\r\n        {message}\r\n      </div>\r\n    )\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Filter from \"./components/Filter\";\r\nimport NumbersList from \"./components/NumbersList\";\r\nimport PhoneBookService from \"./services/PhoneBookService\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"new name\");\r\n  const [number, setNumber] = useState(\"\");\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [notification, setNotification] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(\"GETTING\");\r\n    PhoneBookService.getAll().then((data) => setPersons(data));\r\n  }, []);\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNumber(event.target.value);\r\n  };\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value);\r\n  };\r\n\r\n  const createNotification = (isSuccessful, notification) => {\r\n    setIsError(!isSuccessful);\r\n    setNotification(notification);\r\n    setTimeout(() => {\r\n      setNotification(null);\r\n    }, 5000);\r\n  };\r\n\r\n  const clearInputForm = () => {\r\n    setNewName(\"\");\r\n    setNumber(\"\");\r\n  };\r\n\r\n  const handleAddClick = (event) => {\r\n    event.preventDefault();\r\n\r\n    const person = {\r\n      name: newName.trim(),\r\n      number: number,\r\n    };\r\n\r\n    const existingPerson = persons.find(\r\n      (p) => p.name.toLowerCase().trim() === newName.toLowerCase().trim()\r\n    );\r\n\r\n    if (existingPerson) {\r\n      const shouldUpdate = window.confirm(\r\n        `${person.name} is already added to phone book, replace the old number with a new one?`\r\n      );\r\n      if (shouldUpdate) {\r\n        PhoneBookService.update(existingPerson.id, {\r\n          ...existingPerson,\r\n          number,\r\n        })\r\n          .then((data) => {\r\n            setPersons(\r\n              persons.map((p) => (p.id === existingPerson.id ? data : p))\r\n            );\r\n            createNotification(true, `${data.name} number has been updated.`);\r\n            clearInputForm();\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n            setPersons(persons.filter((p) => p.id !== existingPerson.id));\r\n            createNotification(\r\n              false,\r\n              `${person.name} has already been deleted from server.`\r\n            );\r\n          });\r\n      }\r\n    } else {\r\n      PhoneBookService.create(person)\r\n        .then((data) => {\r\n          setPersons(persons.concat(data));\r\n          createNotification(true, `${data.name} has been added!`);\r\n          clearInputForm();\r\n        })\r\n        .catch((error) => {\r\n          const errorMessage = error.response.data.error;\r\n          console.log(errorMessage);\r\n          createNotification(false, errorMessage);\r\n        });\r\n    }\r\n  };\r\n\r\n  const handlePersonDelete = (person) => {\r\n    const shouldDelete = window.confirm(`Delete ${person.name}?`);\r\n\r\n    if (shouldDelete) {\r\n      PhoneBookService.remove(person.id).catch((error) =>\r\n        console.log(\"already deleted from server.\")\r\n      );\r\n      console.log(\"before delete filter\", persons);\r\n      setPersons(persons.filter((p) => p.id !== person.id));\r\n      console.log(\"after delete filter\", persons);\r\n      createNotification(true, `${person.name} has been deleted!`);\r\n    }\r\n  };\r\n\r\n  const personsToShow =\r\n    filter === \"\"\r\n      ? persons\r\n      : persons.filter((p) =>\r\n          p.name.toLowerCase().includes(filter.toLowerCase())\r\n        );\r\n  console.log(\"persons to show in app\", personsToShow);\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notification} isError={isError} />\r\n      <Filter value={filter} handleFilterChange={handleFilterChange} />\r\n      <PersonForm\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        number={number}\r\n        handleNumberChange={handleNumberChange}\r\n        handleAddClick={handleAddClick}\r\n      />\r\n      <NumbersList\r\n        personsToShow={personsToShow}\r\n        handlePersonDelete={handlePersonDelete}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}